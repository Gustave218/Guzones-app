{% extends "base.html" %}
{% block content %}

<div class="container mt-3">

  <div class="container mt-3">

  <!-- MAIN IMAGE -->
{% if banner.image %}
<div class="banner-main-image">
  {% if banner.image.startswith('http') %}
    <img
      id="mainBannerImage"
      src="{{ banner.image }}"
      alt="{{ banner.title }}"
      onclick="openImageZoom(this.src)"
      class="img-fluid">
  {% else %}
    <img
      id="mainBannerImage"
      src="{{ url_for('static', filename=banner.image) }}"
      alt="{{ banner.title }}"
      onclick="openImageZoom(this.src)"
      class="img-fluid">
  {% endif %}
</div>
{% endif %}

<!-- THUMBNAILS -->
{% if banner.images and banner.images|length > 0 %}
<div class="banner-thumbnails">

  <!-- Main image thumbnail -->
  {% if banner.image %}
    {% if banner.image.startswith('http') %}
      <img
        src="{{ banner.image }}"
        onclick="changeBannerImage(this.src)"
        class="active-thumb"
        alt="Main banner image">
    {% else %}
      <img
        src="{{ url_for('static', filename=banner.image) }}"
        onclick="changeBannerImage(this.src)"
        class="active-thumb"
        alt="Main banner image">
    {% endif %}
  {% endif %}

  <!-- Extra images -->
  {% for img in banner.images %}
    {% if img.image.startswith('http') %}
      <img
        src="{{ img.image }}"
        onclick="changeBannerImage(this.src)"
        alt="Banner image {{ loop.index }}">
    {% else %}
      <img
        src="{{ url_for('static', filename=img.image) }}"
        onclick="changeBannerImage(this.src)"
        alt="Banner image {{ loop.index }}">
    {% endif %}
  {% endfor %}

</div>
{% endif %}

  <div class="banner-card title">{{ banner.title }}</div>


  <div class="banner-card description">{{ banner.description }}</div>

  {% if banner.tel %}
<a href="tel:{{ banner.tel }}"
   class="contact-seller-btn call">
   ðŸ“ž Contact for Price
</a>
{% endif %}

  {% if banner.contact %}
  <a href="https://wa.me/{{ banner.contact }}?text=Hello%20I%20saw%20your%20banner%20on%20Guzones.%20I%20am%20interested%20in%20{{ banner.title }}"
     target="_blank"
     class="contact-seller-btn">
      Contact Us on WhatsApp
  </a>

  <!-- IMAGE ZOOM OVERLAY -->
<div id="imageZoomOverlay" class="image-zoom-overlay" onclick="closeImageZoom()">
  <img id="zoomedImage">
  <span class="close-zoom">âœ•</span>
</div>
  {% endif %}

</div>

<script>
function changeBannerImage(src, el) {
  const mainImage = document.getElementById("mainBannerImage");
  mainImage.src = src;

  document.querySelectorAll(".banner-thumbnails img").forEach(img => {
    img.classList.remove("active-thumb");
  });

  el.classList.add("active-thumb");
}

function openImageZoom(src) {
  const overlay = document.getElementById("imageZoomOverlay");
  const zoomedImg = document.getElementById("zoomedImage");

  zoomedImg.src = src;
  overlay.style.display = "flex";
}

function closeImageZoom() {
  document.getElementById("imageZoomOverlay").style.display = "none";
}
</script>
{% endblock %}