{% extends "base.html" %}
{% block content %}

<style>
.chat-container {
    max-width: 700px;
    margin: auto;
    display: flex;
    flex-direction: column;
    height: 75vh;
}

.chat-header {
    font-weight: 600;
    padding: 12px;
    border-bottom: 1px solid #ddd;
}

.chat-box {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    background: #f8f9fa;
}

.message {
    max-width: 75%;
    padding: 10px 14px;
    border-radius: 14px;
    margin-bottom: 10px;
    line-height: 1.4;
    word-wrap: break-word;
}

.user-msg {
    background: #2563eb;
    color: #fff;
    margin-left: auto;
    border-bottom-right-radius: 4px;
}

.admin-msg {
    background: #e5e7eb;
    color: #111;
    margin-right: auto;
    border-bottom-left-radius: 4px;
}

.chat-input {
    display: flex;
    gap: 10px;
    padding: 10px;
    border-top: 1px solid #ddd;
}

.chat-input input {
    flex: 1;
    border-radius: 20px;
    padding: 10px 14px;
    border: 1px solid #ccc;
}

.chat-input button {
    border-radius: 20px;
    padding: 10px 18px;
}
</style>

<div class="chat-container">

    <!-- HEADER -->
    <div class="chat-header">
        ðŸ’¬ Chat with Guzones Support
    </div>

    <!-- MESSAGES -->
    <div class="chat-box" id="chatBox">
        {% for msg in messages %}
            <div class="message {% if msg.sender == 'user' %}user-msg{% else %}admin-msg{% endif %}">
                {{ msg.message }}
            </div>
        {% endfor %}
    </div>

    <!-- INPUT -->
    <form method="POST" class="chat-input">
        <input
            type="text"
            name="message"
            placeholder="Type your messageâ€¦"
            required
        >
        <button class="btn btn-dark">Send</button>
    </form>

</div>

<script>
const chatBox = document.getElementById("chatBox");
chatBox.scrollTop = chatBox.scrollHeight;
</script>

{% endblock %}