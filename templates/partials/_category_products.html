{% for product in products %}
  {% set rating = (product.id % 3) + 3 %}
  {% set reviews = (product.id * 13) % 240 + 12 %}

  <div class="col-6 col-md-4 col-lg-3 product-item">
    <div class="card h-100 shadow-sm product-card border-0 position-relative">

      <span class="wishlist-btn">â™¡</span>

      <a href="{{ url_for('product_detail', product_id=product.id) }}"
         class="text-decoration-none text-dark">

        <div class="position-relative">
          {% if product.images %}
            <img src="{{ product.images[0].image | smart_img }}"
                 class="card-img-top"
                 style="height:180px; object-fit:cover;">
          {% else %}
            <img src="{{ 'images/placeholder.png' | smart_img }}"
                 class="card-img-top"
                 style="height:180px; object-fit:cover;">
          {% endif %}
        </div>

        <div class="card-body p-2">
          <div class="rating mb-1">
            {% for i in range(rating) %}â˜…{% endfor %}
            {% for i in range(5-rating) %}â˜†{% endfor %}
            <span>({{ reviews }})</span>
          </div>

          <h6 class="fw-semibold mb-1 product-title">
            {{ product.name_fr if g.lang == 'fr' else product.name_en }}
          </h6>

          <p class="fw-bold text-dark mb-0">
            {{ product | money }}
          </p>
        </div>
      </a>

      <div class="px-2 pb-3">
        <a href="{{ url_for('add_to_cart', product_id=product.id) }}"
           class="btn btn-dark w-100 rounded-pill btn-sm">
          ðŸ›’ {{ t.add_to_cart }}
        </a>
      </div>
    </div>
  </div>
{% endfor %}